{% extends 'frontBase.html.twig' %}

{% block body %}
<!-- Offcanvas Overlay -->
<div class="offcanvas-overlay" xmlns="http://www.w3.org/1999/html"></div>

<!-- ...:::: Start Breadcrumb Section:::... -->
<div class="breadcrumb-section breadcrumb-bg-color--golden">
    <div class="breadcrumb-wrapper">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <h3 class="breadcrumb-title">Boutique - Full Width</h3>
                    <div class="breadcrumb-nav breadcrumb-nav-color--black breadcrumb-nav-hover-color--golden">
                        <nav aria-label="breadcrumb">
                            <ul>
                                <li><a href="">Acceuil</a></li>
                                <li><a href="">Boutique</a></li>
                                <li class="" aria-current="page">Shopping yay</li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> <!-- ...:::: End Breadcrumb Section:::... -->

<!-- ...:::: Start Shop Section:::... -->
<div class="shop-section">
    <div class="container">
        <div class="row flex-column-reverse flex-lg-row">
            <div class="col-lg-12">
                <!-- Start Shop Product Sorting Section -->
                <div class="shop-sort-section">
                    <div class="container">
                        <div class="row">
                            <!-- Start Sort Wrapper Box -->
                            <div class="sort-box d-flex justify-content-between align-items-md-center align-items-start flex-md-row flex-column"
                                 >
                                <!-- Start Sort tab Button -->
                                <div class="sort-tablist d-flex align-items-center">


                                    <!-- Start Page Amount -->

                                </div> <!-- End Sort tab Button -->

                                <!-- Start Sort Select Option -->

                                <div class="sidebar-search">
                                    <div class="input-group custom-search-form">
                                        <input type="text" id="search" class="form-control" placeholder="rechercher événements...">
                                    </div>
                                </div>
                                <ul class="nav" id="side-menu">
                                    <li>
                                        <ul class="nav nav-second-level" id="entitiesNav">
                                        </ul>
                                    </li>
                                </ul>




                                <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
                                        <script type="text/javascript">

                                        jQuery(document).ready(function() {
                                        var searchRequest = null;
                                        $("#search").keyup(function() {
                                        var minlength = 1;
                                        var that = this;
                                        var value = $(this).val();
                                        var entitySelector = $("#entitiesNav").html('');
                                        if (value.length >= minlength ) {
                                        if (searchRequest != null)
                                        searchRequest.abort();
                                        searchRequest = $.ajax({
                                        type: "GET",
                                        url: "{{ path('searchAjax') }}",
                                        data: {
                                        'q' : value
                                    },
                                        dataType: "text",
                                        success: function(msg){
                                        //we need to check if the value is the same
                                        if (value===$(that).val()) {
                                        var result = JSON.parse(msg);
                                        $.each(result, function(key, arr) {
                                        $.each(arr, function(id, value) {
                                        if (key === 'posts') {
                                        if (id !== 'error') {
                                        console.log(value[1]);
                                            entitySelector.append('<li><a href="/frontDetailsProduit/'+id+'">'+value+'</a></li>');
                                       } else {
                                            entitySelector.append('<li class="errorLi">'+value+'</li>');
                                       }
                                   }
                               });
                            });
                        }
                    }
                });
        }
    });
});

                                </script>


                            </div> <!-- Start Sort Wrapper Box -->
                        </div>
                    </div>
                </div> <!-- End Section Content -->

                <!-- Start Tab Wrapper -->
                <div class="sort-product-tab-wrapper">
                    <div class="container">
                        <div class="row">
                            <div class="col-12">
                                <div class="tab-content">
                                    <!-- Start Grid View Product -->
                                    <div class="tab-pane active show sort-layout-single" id="layout-4-grid" >
                                        <div class="row">
                                            {% for produit in p %}
                                            <div class="col-xl-3 col-lg-4 col-sm-6 col-12">
                                                <!-- Start Product Default Single Item -->
                                                <div class="product-default-single-item product-color--golden"
                                                     >
                                                    <div class="image-box">
                                                        <a href="" class="image-link">

                                                            <img src="{{ asset('/assets/images/' ~ produit.pathImage) | imagine_filter('produitfiltre')  }}"
                                                                 alt="hi">

                                                        </a>
                                                        <div class="action-link">
                                                            <div class="action-link-left">
                                                                <a href="{{ path('ajouterProduitPanier',{'id':produit.produitId}) }}" >Ajouter au panier</a>
                                                            </div>
                                                            <div class="action-link-right">

                                                                <a href="{{ path('detail_produit_front',{'id':produit.produitId}) }}"><i
                                                                            class="icon-magnifier"></i></a>

                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="content">
                                                        <div class="content-left">
                                                            <h6 class="title"><a
                                                                        href="{{ path('detail_produit_front',{'id':produit.produitId}) }}">{{ produit.nomProduit }}</a></h6>
                                                            <ul class="review-star">
                                                                <li class="fill"><i class="ion-android-star"></i>
                                                                </li>
                                                                <li class="fill"><i class="ion-android-star"></i>
                                                                </li>
                                                                <li class="fill"><i class="ion-android-star"></i>
                                                                </li>
                                                                <li class="fill"><i class="ion-android-star"></i>
                                                                </li>
                                                                <li class="empty"><i class="ion-android-star"></i>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                        <div class="content-right">
                                                            <span class="price">{{ produit.prixUni }} DT</span>
                                                        </div>

                                                    </div>
                                                </div>





                                                <!-- End Product Default Single Item -->
                                            </div>
                                            {% endfor %}
                                        </div>
                                    </div>


                                </div>
                            </div>
                        </div>
                    </div>
                </div> <!-- End Tab Wrapper -->

                <!-- Start Pagination -->
                <div class="page-pagination text-center">
                    <ul>
                        <li class="active">{{ knp_pagination_render(p) }} </li>

                    </ul>
                </div> <!-- End Pagination -->
            </div> <!-- End Shop Product Sorting Section  -->
        </div>
    </div>
</div> <!-- ...:::: End Shop Section:::... -->
{% endblock %}
