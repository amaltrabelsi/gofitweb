{% extends 'base-front.html.twig' %}

{% block body %}
    <!-- Offcanvas Overlay -->
    <div class="offcanvas-overlay" xmlns="http://www.w3.org/1999/html"></div>

    <!-- ...:::: Start Breadcrumb Section:::... -->
    <div class="breadcrumb-section breadcrumb-bg-color--golden">
        <div class="breadcrumb-wrapper">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <h3 class="breadcrumb-title">Terrain</h3>
                        <div class="breadcrumb-nav breadcrumb-nav-color--black breadcrumb-nav-hover-color--golden">
                            <nav aria-label="breadcrumb">
                                <ul>
                                    <li><a href="">Acceuil</a></li>
                                    <li><a href="">Terrain</a></li>
                                    <li class="" aria-current="page">Reservez Terrain </li>
                                </ul>
                            </nav>
    </div> <!-- ...:::: End Breadcrumb Section:::... -->

    <!-- ...:::: Start Shop Section:::... -->
    <div class="shop-section">
        <div class="container">
            <div class="row flex-column-reverse flex-lg-row">
                <div class="col-lg-12">

                    <div class="shop-sort-section">
                        <div class="container">
                            <div class="row">
                                <!-- Start Sort Wrapper Box -->
                                <!-- Start Sort tab Button -->




                                {% for message in app.flashes('success') %}
                                    <div class="alert alert-success">
                                        {{ message }}
                                    </div>
                                {% endfor %}



                            </div>
                            <div class="row">
                                <!-- Start Sort Wrapper Box -->
                                <div class="sort-box d-flex justify-content-between align-items-md-center align-items-start flex-md-row flex-column " >
                                    <!-- Start Sort tab Button -->
                                    <div class="sort-tablist d-flex align-items-center">
                                        <div class="sidebar-search">
                                            <div class="input-group custom-search-form">

                                                <input type="text" id="search" class="form-control" placeholder="rechercher terrain...">
                                            </div>
                                        </div>
                                        <ul class="nav" id="side-menu">
                                            <li>
                                                <ul class="nav nav-second-level" id="entitiesNav">
                                                </ul>
                                            </li>
                                        </ul>


                                    </div> <!-- End Sort tab Button -->

                                    <!-- Start Sort Select Option -->
                                    <div class="sort-select-list d-flex align-items-center">
                                        <label class="mr-2">Sort By:</label>
                                        <form action="#">
                                            <fieldset>
                                                <select name="speed" id="speed" style="display: none;">
                                                    <option>Sort by average rating</option>
                                                    <option>Sort by popularity</option>
                                                    <option selected="selected">Sort by newness</option>
                                                    <option>Sort by price: low to high</option>
                                                    <option>Sort by price: high to low</option>
                                                    <option>Product Name: Z</option>
                                                </select><div class="nice-select" tabindex="0"><span class="current">Sort by newness</span><ul class="list"><li data-value="Sort by average rating" class="option">Sort by average rating</li><li data-value="Sort by popularity" class="option">Sort by popularity</li><li data-value="Sort by newness" class="option selected">Sort by newness</li><li data-value="Sort by price: low to high" class="option">Sort by price: low to high</li><li data-value="Sort by price: high to low" class="option">Sort by price: high to low</li><li data-value="Product Name: Z" class="option">Product Name: Z</li></ul></div>
                                            </fieldset>
                                        </form>
                                    </div> <!-- End Sort Select Option -->



                                </div> <!-- Start Sort Wrapper Box -->
                            </div>
                        </div>
                    </div>






                    <!-- Start Shop Product Sorting Section -->
                    <div class="shop-sort-section">
                        <div class="container">


                            <!-- Start Sort Wrapper Box -->





                            <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
                            <script type="text/javascript">

                                jQuery(document).ready(function() {
                                    var searchRequest = null;
                                    $("#search").keyup(function() {
                                        var minlength = 1;
                                        var that = this;
                                        var value = $(this).val();
                                        var entitySelector = $("#entitiesNav").html('');
                                        if (value.length >= minlength ) {
                                            if (searchRequest != null)
                                                searchRequest.abort();
                                            searchRequest = $.ajax({
                                                type: "GET",
                                                url: "{{ path('searchAjax') }}",
                                                data: {
                                                    'q' : value
                                                },
                                                dataType: "text",
                                                success: function(msg){
                                                    //we need to check if the value is the same
                                                    if (value===$(that).val()) {
                                                        var result = JSON.parse(msg);
                                                        $.each(result, function(key, arr) {
                                                            $.each(arr, function(id, value) {
                                                                if (key === 'posts') {
                                                                    if (id !== 'error') {
                                                                        console.log(value[1]);
                                                                        entitySelector.append('<li><a href="/terrain/'+id+'">'+value+'</a></li>');
                                                                    } else {
                                                                        entitySelector.append('<li class="errorLi">'+value+'</li>');
                                                                    }
                                                                }
                                                            });
                                                        });
                                                    }
                                                }
                                            });
                                        }
                                    });
                                });

                            </script>



                        </div> <!-- End Section Content -->
                    </div>


                    <!-- Start Tab Wrapper -->
                    <div class="sort-product-tab-wrapper">
                        <div class="container">
                            <div class="row">
                                <div class="col-12">
                                    <div class="tab-content">
                                        <!-- Start Grid View Product -->
                                        <div class="tab-pane active show sort-layout-single" id="layout-4-grid" >
                                            <div class="row">
                                                {% for t in p %}
                                                    <div class="col-xl-3 col-lg-4 col-sm-6 col-12">
                                                        <!-- Start Product Default Single Item -->
                                                        <div class="product-default-single-item product-color--golden"
                                                        >
                                                            <div class="image-box">
                                                                <a href="" class="image-link">

                                                                    <img src="{{ asset('uploads/images/' ~ t.image)  }}"
                                                                         alt="hi">

                                                                </a>
                                                                <div class="action-link">

                                                                    <div class="action-link-right">

                                                                        <a href="{{ path('detail_terrain',{'id':t.terrainId}) }}"><i
                                                                                    class="icon-magnifier"></i>  voir les détails</a>

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="content">
                                                                <div class="content-left">
                                                                    <h6 class="title"><a
                                                                                href="{{ path('detail_terrain',{'id':t.terrainId}) }}">{{ t.nomTerrain }}</a></h6>

                                                                </div>
                                                                <div class="content-right">
                                                                    <span class="price">{{ t.prix}} DT</span>
                                                                </div>

                                                            </div>
                                                        </div>





                                                        <!-- End Product Default Single Item -->
                                                    </div>
                                                {% endfor %}
                                            </div>
                                        </div>


                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> <!-- End Tab Wrapper -->

                    <!-- Start Pagination -->
                    <div class="page-pagination text-center">
                        <ul>
                            <li class="active">{{ knp_pagination_render(p) }} </li>

                        </ul>
                    </div> <!-- End Pagination -->
                </div> <!-- End Shop Product Sorting Section  -->
            </div>
        </div>
    </div>
                    </div>
                </div>
            </div>
        </div>
    </div> <!-- ...:::: End Shop Section:::... -->
   <center>
    <h4> Pour Collaborer avec notre site contactez nos admin par mail :</h4>
       <a href="mailto:gofit2022bythefive@gmail.com?subject=HTML link">gofit2022bythefive@gmail.com</a>

   </center>
{% endblock %}
